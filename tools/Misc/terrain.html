<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Armor Simulation</title>
<style> body { margin:0; overflow:hidden; } canvas { display:block; } </style>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
</head>
<body>
<script>
// --- Scene setup ---
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x111111);

// --- Camera ---
const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
let armorLayers = 10; // number of layers
let armorCenter = new THREE.Vector3(0, armorLayers/2, 0);
let cameraRadius = 30;
let cameraAngle = Math.PI/4;
let cameraHeight = 15;

// --- Renderer ---
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// --- Lighting ---
const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(20, 40, 20);
scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// --- Armor blocks ---
const armorBlocks = [];
for(let i=0; i<armorLayers; i++){
    const geometry = new THREE.BoxGeometry(2, 1, 4);
    const material = new THREE.MeshPhongMaterial({color: 0x5555ff, transparent:true, opacity:0.6});
    const block = new THREE.Mesh(geometry, material);
    block.position.set(0, i + 0.5, 0); // stack in y
    scene.add(block);
    armorBlocks.push(block);
}

// --- Reset camera ---
function resetCamera() {
    cameraAngle = Math.PI/4;
    cameraRadius = 30;
    cameraHeight = 15;
    camera.position.x = armorCenter.x + cameraRadius * Math.cos(cameraAngle);
    camera.position.z = armorCenter.z + cameraRadius * Math.sin(cameraAngle);
    camera.position.y = armorCenter.y + cameraHeight;
    camera.lookAt(armorCenter);
}
resetCamera();

// --- Animation variables ---
const meltSpeed = 0.02; // speed blocks move/fall
const rotationSpeed = 0.2; // camera orbit speed
let time = 0;

// --- Animation loop ---
function animate(delta){
    time += delta;

    // Orbit camera around armor
    cameraAngle += delta * rotationSpeed;
    camera.position.x = armorCenter.x + cameraRadius * Math.cos(cameraAngle);
    camera.position.z = armorCenter.z + cameraRadius * Math.sin(cameraAngle);
    camera.position.y = armorCenter.y + cameraHeight;
    camera.lookAt(armorCenter);

    // Animate armor layers
    armorBlocks.forEach((block, i) => {
        // random wobble
        block.rotation.x += 0.005 * Math.random();
        block.rotation.z += 0.005 * Math.random();

        // melt/fly effect (shift in x/y/z)
        block.position.y -= meltSpeed * Math.random(); // downward
        block.position.x += (Math.random()-0.5) * meltSpeed;
        block.position.z += (Math.random()-0.5) * meltSpeed;

        // fade out as it “melts/flees”
        block.material.opacity -= 0.001;
        if(block.material.opacity < 0) block.material.opacity = 0;
    });

    renderer.render(scene, camera);
    requestAnimationFrame((newTime)=>animate((newTime - time)/1000));
}
animate(0);
</script>
</body>
</html>